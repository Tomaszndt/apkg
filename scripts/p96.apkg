name="p96"
tags="library, rtg, picasso"
version="3.5.0"
cpu=68020
require="amigaos>3.2, mui" #gadtools-library,
description="versatile commodore emulator"
packager="lobotomius@gmail.com"
source=("Picasso96.lha*719793c42cc94f7cb5d20ee2de1ff6f07360f81a3dd3a8f0e1bf87a2fb53a679")
upstream="https://icomp.de"

# functions
#  makedir     path (relative to $pkgdir)
#  copy        source, destination (source relative to $srcdir, destination to $pkgdir)
#  user_patch  filename, mode (all, end), needle, tag, text
# variables
#  $srcdir
#  $pkgdir

# this function is executed on build
function build {
    local file
    local uaemonitor="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
BQYAAAAAAwADAA0BAAARBgAAAAA="

    local prefs="UEsDBAoAAgAAAKumPFpWF2RRBQAAAAUAAAAmABwAUHJlZnMvRW52LUFyY2hpdmUvUGljYXNzbzk2
L0FtaWdhVmlkZW9VVAkAA8JDmWfCQ5lndXgLAAEE6AMAAATpAwAAMTVrSHpQSwMECgACAAAAq6Y8
Wr0MLvICAAAAAgAAACoAHABQcmVmcy9FbnYtQXJjaGl2ZS9QaWNhc3NvOTYvQmxhY2tTd2l0Y2hp
bmdVVAkAA8JDmWfCQ5lndXgLAAEE6AMAAATpAwAATm9QSwMECgACAAAAq6Y8WqFx4XI9AAAAPQAA
ACEAHABQcmVmcy9FbnYtQXJjaGl2ZS9QaWNhc3NvOTYvRGVidWdVVAkAA8JDmWfCQ5lndXgLAAEE
6AMAAATpAwAATm8KRG8gbm90IGVuYWJsZSEKT25seSB1c2VmdWwgZm9yIHRoZSBydGcubGlicmFy
eSBkZXZlbG9wZXJzLlBLAwQKAAIAAACrpjxa5eL7xyEAAAAhAAAAJgAcAFByZWZzL0Vudi1BcmNo
aXZlL1BpY2Fzc285Ni9EZWJ1Zy51YWVtVVQJAAPCQ5lnwkOZZ3V4CwABBOgDAAAE6QMAAC0tLS1y
d2VkIDIwMjUtMDEtMjggMjA6NTM6MjIuNjYgClBLAwQKAAIAAACrpjxavQwu8gIAAAACAAAAKwAc
AFByZWZzL0Vudi1BcmNoaXZlL1BpY2Fzc285Ni9EaXJlY3RDb2xvck1hc2tVVAkAA8JDmWfCQ5ln
dXgLAAEE6AMAAATpAwAATm9QSwMECgACAAAAq6Y8Wr0MLvICAAAAAgAAAC8AHABQcmVmcy9FbnYt
QXJjaGl2ZS9QaWNhc3NvOTYvRGlzYWJsZUFtaWdhQmxpdHRlclVUCQADwkOZZ8JDmWd1eAsAAQTo
AwAABOkDAABOb1BLAwQKAAIAAACrpjxavQwu8gIAAAACAAAAJwAcAFByZWZzL0Vudi1BcmNoaXZl
L1BpY2Fzc285Ni9Eb05vdFNldE1NVVVUCQADwkOZZ8JDmWd1eAsAAQToAwAABOkDAABOb1BLAwQK
AAIAAACrpjxavQwu8gIAAAACAAAAKQAcAFByZWZzL0Vudi1BcmNoaXZlL1BpY2Fzc285Ni9FbmFi
bGVCb290VkdBVVQJAAPCQ5lnwkOZZ3V4CwABBOgDAAAE6QMAAE5vUEsDBAoAAgAAAKumPFqhceFy
PQAAAD0AAAAoABwAUHJlZnMvRW52LUFyY2hpdmUvUGljYXNzbzk2L0V4cGVyaW1lbnRhbFVUCQAD
wkOZZ8JDmWd1eAsAAQToAwAABOkDAABObwpEbyBub3QgZW5hYmxlIQpPbmx5IHVzZWZ1bCBmb3Ig
dGhlIHJ0Zy5saWJyYXJ5IGRldmVsb3BlcnMuUEsDBAoAAgAAAKumPFq9DC7yAgAAAAIAAAAuABwA
UHJlZnMvRW52LUFyY2hpdmUvUGljYXNzbzk2L1BsYW5hck9ubHlESVBGREJVRlVUCQADwkOZZ8JD
mWd1eAsAAQToAwAABOkDAABOb1BLAwQKAAIAAACrpjxaSXOqTQMAAAADAAAAKAAcAFByZWZzL0Vu
di1BcmNoaXZlL1BpY2Fzc285Ni9QbGFuZXNUb0Zhc3RVVAkAA8JDmWfCQ5lndXgLAAEE6AMAAATp
AwAAWWVzUEsDBAoAAgAAAKumPFoX6dFoCQAAAAkAAAAlABwAUHJlZnMvRW52LUFyY2hpdmUvUGlj
YXNzbzk2L1Nob3dNb2Rlc1VUCQADwkOZZ8JDmWd1eAsAAQToAwAABOkDAABFc3NlbnRpYWxQSwME
CgACAAAAk0WXWVl2xdciAAAAIgAAACMAHABQcmVmcy9FbnYtQXJjaGl2ZS9QaWNhc3NvOTYvVmVy
c2lvblVUCQAD9iJpZ/YiaWd1eAsAAQToAwAABOkDAAAzLjUuMAooMjMuMTIuMjQpIKkyMDE3LTIw
MjQgaUNvbXAKUEsBAh4DCgACAAAAq6Y8WlYXZFEFAAAABQAAACYAGAAAAAAAAQAAAKSBAAAAAFBy
ZWZzL0Vudi1BcmNoaXZlL1BpY2Fzc285Ni9BbWlnYVZpZGVvVVQFAAPCQ5lndXgLAAEE6AMAAATp
AwAAUEsBAh4DCgACAAAAq6Y8Wr0MLvICAAAAAgAAACoAGAAAAAAAAQAAAKSBZQAAAFByZWZzL0Vu
di1BcmNoaXZlL1BpY2Fzc285Ni9CbGFja1N3aXRjaGluZ1VUBQADwkOZZ3V4CwABBOgDAAAE6QMA
AFBLAQIeAwoAAgAAAKumPFqhceFyPQAAAD0AAAAhABgAAAAAAAEAAACkgcsAAABQcmVmcy9FbnYt
QXJjaGl2ZS9QaWNhc3NvOTYvRGVidWdVVAUAA8JDmWd1eAsAAQToAwAABOkDAABQSwECHgMKAAIA
AACrpjxa5eL7xyEAAAAhAAAAJgAYAAAAAAABAAAApIFjAQAAUHJlZnMvRW52LUFyY2hpdmUvUGlj
YXNzbzk2L0RlYnVnLnVhZW1VVAUAA8JDmWd1eAsAAQToAwAABOkDAABQSwECHgMKAAIAAACrpjxa
vQwu8gIAAAACAAAAKwAYAAAAAAABAAAApIHkAQAAUHJlZnMvRW52LUFyY2hpdmUvUGljYXNzbzk2
L0RpcmVjdENvbG9yTWFza1VUBQADwkOZZ3V4CwABBOgDAAAE6QMAAFBLAQIeAwoAAgAAAKumPFq9
DC7yAgAAAAIAAAAvABgAAAAAAAEAAACkgUsCAABQcmVmcy9FbnYtQXJjaGl2ZS9QaWNhc3NvOTYv
RGlzYWJsZUFtaWdhQmxpdHRlclVUBQADwkOZZ3V4CwABBOgDAAAE6QMAAFBLAQIeAwoAAgAAAKum
PFq9DC7yAgAAAAIAAAAnABgAAAAAAAEAAACkgbYCAABQcmVmcy9FbnYtQXJjaGl2ZS9QaWNhc3Nv
OTYvRG9Ob3RTZXRNTVVVVAUAA8JDmWd1eAsAAQToAwAABOkDAABQSwECHgMKAAIAAACrpjxavQwu
8gIAAAACAAAAKQAYAAAAAAABAAAApIEZAwAAUHJlZnMvRW52LUFyY2hpdmUvUGljYXNzbzk2L0Vu
YWJsZUJvb3RWR0FVVAUAA8JDmWd1eAsAAQToAwAABOkDAABQSwECHgMKAAIAAACrpjxaoXHhcj0A
AAA9AAAAKAAYAAAAAAABAAAApIF+AwAAUHJlZnMvRW52LUFyY2hpdmUvUGljYXNzbzk2L0V4cGVy
aW1lbnRhbFVUBQADwkOZZ3V4CwABBOgDAAAE6QMAAFBLAQIeAwoAAgAAAKumPFq9DC7yAgAAAAIA
AAAuABgAAAAAAAEAAACkgR0EAABQcmVmcy9FbnYtQXJjaGl2ZS9QaWNhc3NvOTYvUGxhbmFyT25s
eURJUEZEQlVGVVQFAAPCQ5lndXgLAAEE6AMAAATpAwAAUEsBAh4DCgACAAAAq6Y8Wklzqk0DAAAA
AwAAACgAGAAAAAAAAQAAAKSBhwQAAFByZWZzL0Vudi1BcmNoaXZlL1BpY2Fzc285Ni9QbGFuZXNU
b0Zhc3RVVAUAA8JDmWd1eAsAAQToAwAABOkDAABQSwECHgMKAAIAAACrpjxaF+nRaAkAAAAJAAAA
JQAYAAAAAAABAAAApIHsBAAAUHJlZnMvRW52LUFyY2hpdmUvUGljYXNzbzk2L1Nob3dNb2Rlc1VU
BQADwkOZZ3V4CwABBOgDAAAE6QMAAFBLAQIeAwoAAgAAAJNFl1lZdsXXIgAAACIAAAAjABgAAAAA
AAEAAACkgVQFAABQcmVmcy9FbnYtQXJjaGl2ZS9QaWNhc3NvOTYvVmVyc2lvblVUBQAD9iJpZ3V4
CwABBOgDAAAE6QMAAFBLBQYAAAAADQANAJUFAADTBQAAAAA="

    local settings="UEsDBBQAAgAIANqKlFl2sa3XCAIAAHoGAAAWABwARGV2cy9QaWNhc3NvOTZTZXR0aW5nc1VUCQAD
7KdlZ/JFmWd1eAsAAQToAwAABOkDAACNlEFrE0EUx/87uwlLVJiTLMXDUEqpQtfZTbrZjZcmRlGk
aUxK6EHFpoYSKCk2QfYkPfgBeuzFowdBxE/h1Y+gR48ePQjxzRSXZHVl3uExs/ObN/sb3u793d4O
UD7tJlG/2ensAriLtcG9XkN0x4cH0+kJLYxms/HkaCoGgR+IjTDwZd1P6jfF+yBJok1KdbHnN4cz
0fQfTUajU3TR33vQplrruAw2GB8fHxyNNqsBtvBXtNodeguIyclkhP9Er6+rrnXBYW3jx3yuaqtd
jWoo07AmoZOKnYeaXQXmc8W6N6wLdQY8wCrTqASrch2f337Jk9yY9IxJUUhmThYHO7O+LThFNZnW
YnJSKe+kWNezBc03sE9brtHoClgQW68Ht/MkNyY9Y1IUkpkT47AF219wiqVMI0lOKuWdFOvCUY9j
qgv2kkYW2Pqq9f3J1zzJjUnPmBSFZOZkq3NtLDgFMqyl9SiGTjknxborzk+aS5wDtlqpwH3cYMM7
T/MkNyY9Y1IUkpmTQ07P7e1Fp4A+qLgaQqe8E7HuSun8z03Zr3TVSusW+/iukSe5MekZk6KQzJxK
5HRmv1ly2grTRDVfctl8S1WJJacLfVOqqtrXhvOP84nkxqRnTIpCMnMqc/pxOEu9F8YyVQ0InZad
FOu2yrG+qU+A80J/r1eHMfv14Vme5MakZ0yKQvI3UEsBAh4DFAACAAgA2oqUWXaxrdcIAgAAegYA
ABYAGAAAAAAAAAAAAKSBAAAAAERldnMvUGljYXNzbzk2U2V0dGluZ3NVVAUAA+ynZWd1eAsAAQTo
AwAABOkDAABQSwUGAAAAAAEAAQBcAAAAWAIAAAAA"

    cd "Picasso96Install" || exit 1

    echo "$uaemonitor" | base64 -d > uaemonitor.zip && unzip -qo uaemonitor.zip
    echo "$prefs" | base64 -d > prefs.zip && unzip -qo prefs.zip
    echo "$settings" | base64 -d > settings.zip && unzip -qo settings.zip

    copy "Commodities/Disabled/P96ScreenCx" "WBStartup/"
    copy "Commodities/Disabled/P96ScreenCx.info" "WBStartup/"

    copy "Libs/Picasso96API.library" "Libs/"
    copy "Libs/Picasso96/emulation.library" "Libs/Picasso96/"
    copy "Libs/Picasso96/rtg.library" "Libs/Picasso96/"

    copy "Devs/Monitors/uaegfx" "Devs/Monitors/uaegfx"
    copy "Devs/Monitors/uaegfx.info" "Devs/Monitors/uaegfx.info"
    copy "devs/monitors/Native" "Devs/Monitors/"
    copy "devs/monitors/Native.info" "Devs/Monitors/"
    copy "devs/monitors/Picasso96" "Devs/Monitors/"
    copy "devs/monitors/Picasso96.info" "Devs/Monitors/"

    for file in Prefs/Env-Archive/Picasso96/*; do
        copy "$file" "$file"
    done
    copy "Devs/Picasso96Settings" "Devs/"

    for file in FindBoard FindCVPPC FindGVP110 FindIndiECSv4 FindPCI Reboot; do
        copy "$file" "C/"
    done

    for file in prefs/*; do copy "$file" "Prefs/${file##*/}"; done

    copy "documentation/History.readme" "Locale/Readme/$name-$version/"
    copy "documentation/P96Prefs.guide" "Locale/Help/"
    copy "documentation/P96Prefs.guide.info" "Locale/Help/"
    copy "documentation/P96_english.guide" "Locale/Help/"
    copy "documentation/P96_english.guide.info" "Locale/Help/"

}

# this function is executed on installation after all files have been copied
function post_install {
    :
}

# vim: ts=4:syntax=sh:

